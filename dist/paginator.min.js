!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Paginator=e()}(this,(function(){"use strict";var t=Object.freeze({__proto__:null,reportError:function(...t){console.error(...t)},throwError:function(t){throw new Error(t)}});function e(t,e,n){if("string"!=typeof t)return t;let i=document;return null===e&&n?i=n:e&&e instanceof Node&&"querySelector"in e?i=e:n&&n instanceof Node&&"querySelector"in n&&(i=n),"all"===e?i.querySelectorAll(t):i.querySelector(t)}function n(t,e,n=1/0,i=!1){let s=t.parentElement,a=0;for(;s&&a<n;){if(s.matches(e))return!i||s;s=s.parentElement,a++}return!!i&&null}function i(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function s(t){return"function"==typeof t}function a(t){return"string"==typeof t}function o(t){return Array.isArray(t)}function r(t){return"number"!=typeof t&&(!t||"string"==typeof t&&0===t.length)}function l(t,...e){if(!e.length)return t;const n=e.shift();if(n)for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const s=n[e],a=e;i(s)||o(s)?(t[a]&&"object"==typeof t[a]||(t[a]=Array.isArray(s)?[]:{}),l(t[a],s)):t[a]=s}return l(t,...e)}function c(t=8){return Math.random().toString(36).substring(2,2+t)}function u(t,e=new FormData){const{data:n,parentKey:i=""}=t;if(null!==n&&"object"==typeof n)if(n instanceof Blob||n instanceof File){const t=i||"file";e.append(t,n)}else Object.keys(n).forEach((t=>{const s=n[t],a=i?`${i}[${t}]`:t;null!==s&&"object"==typeof s?u({data:s,parentKey:a},e):null!==s&&e.append(a,String(s))}));else null!==n&&e.append(i,n);return e}function h(t,e=""){if(t instanceof FormData)return t;return u({data:t,parentKey:e})}async function _(t){const{url:e,method:n="GET",headers:i={},cache:s="no-cache",mode:a="cors",credentials:o="same-origin",body:r=null,beforeSend:l=null,success:c=null,error:u=null}=t;let h,_=e,p={method:n,mode:a,headers:i instanceof Headers?i:new Headers(i),cache:s,credentials:o};if(null!==r&&"GET"===n.toUpperCase())_=function(t,e,n=!0){const i=new URL(t);for(const[t,s]of Object.entries(e)){const e=null===s?"":String(s);!n&&i.searchParams.has(t)||i.searchParams.set(t,e)}return i.toString()}("string"==typeof e?e:e.toString(),r,!0);else if(null!==r&&["PUT","POST","DELETE"].includes(n.toUpperCase())){let t=r;r instanceof FormData||(t=JSON.stringify(r),p.headers instanceof Headers||(p.headers=new Headers(p.headers)),p.headers.append("Content-Type","application/json")),p.body=t}if("string"==typeof _||_ instanceof URL)h=new Request(_,p);else{if(!(_ instanceof Request))throw new Error("Invalid URL type");h=_}try{const t=await new Promise((t=>{l?.(),t(h)})),e=await fetch(t),n=await e.json();return c?.(n),n}catch(t){throw u?.(t),t}}const p=async function(t){const{url:e,data:n,method:i="POST",headers:s,cache:a,mode:o,credentials:r,success:l,errorCallback:c,beforeSend:u,encode:p=!0}=t;return _({url:e,method:i,headers:s,cache:a,mode:o,credentials:r,body:p&&"GET"!==i.toUpperCase()?h(n):n,beforeSend:u,success:t=>{l?.(t)},error:t=>{c?.(t)}})};class f{static throwError=t.throwError;static getElem=e;static hasParent=n;static deepMerge=l;static generateRandom=c;static isEmpty=r;static isObject=i;static isArray=o;static isString=a;static isFunction=s;static fetchData=p;static isNumeric(t){return!isNaN(parseFloat(t))&&isFinite(t)}static composeClassNames(...t){return(t=t.filter((t=>!!t))).length>0?t.join(" "):""}static isPageItem(t){const e=["J-pagination-page","J-pagination-previous","J-pagination-next"],n=t.classList;for(let t=0;t<e.length;t++)if(n.contains(e[t]))return!0;return!1}}const d={dataSource:[],locator:"data",totalNumber:0,totalNumberLocator:null,pageNumber:1,pageSize:10,pageRange:2,alias:{pageNumber:"pageNumber",pageSize:"pageSize"},showPrevious:!0,showNext:!0,showPageNumbers:!0,showNavigator:!1,hideFirstOnEllipsisShow:!1,hideLastOnEllipsisShow:!1,autoHidePrevious:!1,autoHideNext:!1,classPrefix:"pagination",className:"",activeClassName:"active",disableClassName:"disabled",ulClassName:"",pageClassName:"",prevClassName:"",nextClassName:"",prevText:"&laquo;",nextText:"&raquo;",ellipsisText:"...",goButtonText:"Go",formatNavigator:"{currentPage} of {totalPage}",header:"",footer:"",pageLink:"",position:"bottom",formatResult:t=>t,dataLoader:{method:"GET",data:{},cache:"no-cache",headers:{"Content-Type":"application/json"},mode:"cors",beforeSend:t=>t,credentials:"same-origin",pageNumberStartWithZero:!1},triggerPagingOnInit:!0,resetPageNumberOnInit:!1,hideOnlyOnePage:!1,onError:t=>console.error("Pagination error:",t)};var g,m,y,b,v,N,P,S,w,k,T={},D=[],L=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,C=Array.isArray;function x(t,e){for(var n in e)t[n]=e[n];return t}function E(t){var e=t.parentNode;e&&e.removeChild(t)}function M(t,e,n){var i,s,a,o={};for(a in e)"key"==a?i=e[a]:"ref"==a?s=e[a]:o[a]=e[a];if(arguments.length>2&&(o.children=arguments.length>3?g.call(arguments,2):n),"function"==typeof t&&null!=t.defaultProps)for(a in t.defaultProps)void 0===o[a]&&(o[a]=t.defaultProps[a]);return I(t,o,i,s,null)}function I(t,e,n,i,s){var a={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==s?++y:s,__i:-1,__u:0};return null==s&&null!=m.vnode&&m.vnode(a),a}function O(t){return t.children}function F(t,e){this.props=t,this.context=e}function H(t,e){if(null==e)return t.__?H(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?H(t):null}function A(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return A(t)}}function R(t){(!t.__d&&(t.__d=!0)&&b.push(t)&&!$.__r++||v!==m.debounceRendering)&&((v=m.debounceRendering)||N)($)}function $(){var t,e,n,i,s,a,o,r;for(b.sort(P);t=b.shift();)t.__d&&(e=b.length,i=void 0,a=(s=(n=t).__v).__e,o=[],r=[],n.__P&&((i=x({},s)).__v=s.__v+1,m.vnode&&m.vnode(i),G(n.__P,i,s,n.__n,n.__P.namespaceURI,32&s.__u?[a]:null,o,null==a?H(s):a,!!(32&s.__u),r),i.__v=s.__v,i.__.__k[i.__i]=i,V(o,i,r),i.__e!=a&&A(i)),b.length>e&&b.sort(P));$.__r=0}function U(t,e,n,i,s,a,o,r,l,c,u){var h,_,p,f,d,g=i&&i.__k||D,m=e.length;for(n.__d=l,J(n,e,g),l=n.__d,h=0;h<m;h++)null!=(p=n.__k[h])&&"boolean"!=typeof p&&"function"!=typeof p&&(_=-1===p.__i?T:g[p.__i]||T,p.__i=h,G(t,p,_,s,a,o,r,l,c,u),f=p.__e,p.ref&&_.ref!=p.ref&&(_.ref&&Z(_.ref,null,p),u.push(p.ref,p.__c||f,p)),null==d&&null!=f&&(d=f),65536&p.__u||_.__k===p.__k?(l&&!l.isConnected&&(l=H(_)),l=j(p,l,t)):"function"==typeof p.type&&void 0!==p.__d?l=p.__d:f&&(l=f.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=l,n.__e=d}function J(t,e,n){var i,s,a,o,r,l=e.length,c=n.length,u=c,h=0;for(t.__k=[],i=0;i<l;i++)o=i+h,null!=(s=t.__k[i]=null==(s=e[i])||"boolean"==typeof s||"function"==typeof s?null:"string"==typeof s||"number"==typeof s||"bigint"==typeof s||s.constructor==String?I(null,s,null,null,null):C(s)?I(O,{children:s},null,null,null):void 0===s.constructor&&s.__b>0?I(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s)?(s.__=t,s.__b=t.__b+1,r=z(s,n,o,u),s.__i=r,a=null,-1!==r&&(u--,(a=n[r])&&(a.__u|=131072)),null==a||null===a.__v?(-1==r&&h--,"function"!=typeof s.type&&(s.__u|=65536)):r!==o&&(r===o+1?h++:r>o?u>l-o?h+=r-o:h--:r<o?r==o-1&&(h=r-o):h=0,r!==i+h&&(s.__u|=65536))):(a=n[o])&&null==a.key&&a.__e&&!(131072&a.__u)&&(a.__e==t.__d&&(t.__d=H(a)),Q(a,a,!1),n[o]=null,u--);if(u)for(i=0;i<c;i++)null!=(a=n[i])&&!(131072&a.__u)&&(a.__e==t.__d&&(t.__d=H(a)),Q(a,a))}function j(t,e,n){var i,s;if("function"==typeof t.type){for(i=t.__k,s=0;i&&s<i.length;s++)i[s]&&(i[s].__=t,e=j(i[s],e,n));return e}t.__e!=e&&(n.insertBefore(t.__e,e||null),e=t.__e);do{e=e&&e.nextSibling}while(null!=e&&8===e.nodeType);return e}function z(t,e,n,i){var s=t.key,a=t.type,o=n-1,r=n+1,l=e[n];if(null===l||l&&s==l.key&&a===l.type&&!(131072&l.__u))return n;if(i>(null==l||131072&l.__u?0:1))for(;o>=0||r<e.length;){if(o>=0){if((l=e[o])&&!(131072&l.__u)&&s==l.key&&a===l.type)return o;o--}if(r<e.length){if((l=e[r])&&!(131072&l.__u)&&s==l.key&&a===l.type)return r;r++}}return-1}function W(t,e,n){"-"===e[0]?t.setProperty(e,null==n?"":n):t[e]=null==n?"":"number"!=typeof n||L.test(e)?n:n+"px"}function B(t,e,n,i,s){var a;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof i&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||W(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||W(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])a=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||"onFocusOut"===e||"onFocusIn"===e?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+a]=n,n?i?n.u=i.u:(n.u=S,t.addEventListener(e,a?k:w,a)):t.removeEventListener(e,a?k:w,a);else{if("http://www.w3.org/2000/svg"==s)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=e&&"height"!=e&&"href"!=e&&"list"!=e&&"form"!=e&&"tabIndex"!=e&&"download"!=e&&"rowSpan"!=e&&"colSpan"!=e&&"role"!=e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null==n||!1===n&&"-"!==e[4]?t.removeAttribute(e):t.setAttribute(e,n))}}function q(t){return function(e){if(this.l){var n=this.l[e.type+t];if(null==e.t)e.t=S++;else if(e.t<n.u)return;return n(m.event?m.event(e):e)}}}function G(t,e,n,i,s,a,o,r,l,c){var u,h,_,p,f,d,g,y,b,v,N,P,S,w,k,T=e.type;if(void 0!==e.constructor)return null;128&n.__u&&(l=!!(32&n.__u),a=[r=e.__e=n.__e]),(u=m.__b)&&u(e);t:if("function"==typeof T)try{if(y=e.props,b=(u=T.contextType)&&i[u.__c],v=u?b?b.props.value:u.__:i,n.__c?g=(h=e.__c=n.__c).__=h.__E:("prototype"in T&&T.prototype.render?e.__c=h=new T(y,v):(e.__c=h=new F(y,v),h.constructor=T,h.render=X),b&&b.sub(h),h.props=y,h.state||(h.state={}),h.context=v,h.__n=i,_=h.__d=!0,h.__h=[],h._sb=[]),null==h.__s&&(h.__s=h.state),null!=T.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=x({},h.__s)),x(h.__s,T.getDerivedStateFromProps(y,h.__s))),p=h.props,f=h.state,h.__v=e,_)null==T.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==T.getDerivedStateFromProps&&y!==p&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(y,v),!h.__e&&(null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(y,h.__s,v)||e.__v===n.__v)){for(e.__v!==n.__v&&(h.props=y,h.state=h.__s,h.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach((function(t){t&&(t.__=e)})),N=0;N<h._sb.length;N++)h.__h.push(h._sb[N]);h._sb=[],h.__h.length&&o.push(h);break t}null!=h.componentWillUpdate&&h.componentWillUpdate(y,h.__s,v),null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(p,f,d)}))}if(h.context=v,h.props=y,h.__P=t,h.__e=!1,P=m.__r,S=0,"prototype"in T&&T.prototype.render){for(h.state=h.__s,h.__d=!1,P&&P(e),u=h.render(h.props,h.state,h.context),w=0;w<h._sb.length;w++)h.__h.push(h._sb[w]);h._sb=[]}else do{h.__d=!1,P&&P(e),u=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++S<25);h.state=h.__s,null!=h.getChildContext&&(i=x(x({},i),h.getChildContext())),_||null==h.getSnapshotBeforeUpdate||(d=h.getSnapshotBeforeUpdate(p,f)),U(t,C(k=null!=u&&u.type===O&&null==u.key?u.props.children:u)?k:[k],e,n,i,s,a,o,r,l,c),h.base=e.__e,e.__u&=-161,h.__h.length&&o.push(h),g&&(h.__E=h.__=null)}catch(t){e.__v=null,l||null!=a?(e.__e=r,e.__u|=l?160:32,a[a.indexOf(r)]=null):(e.__e=n.__e,e.__k=n.__k),m.__e(t,e,n)}else null==a&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=K(n.__e,e,n,i,s,a,o,l,c);(u=m.diffed)&&u(e)}function V(t,e,n){e.__d=void 0;for(var i=0;i<n.length;i++)Z(n[i],n[++i],n[++i]);m.__c&&m.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){m.__e(t,e.__v)}}))}function K(t,e,n,i,s,a,o,r,l){var c,u,h,_,p,f,d,m=n.props,y=e.props,b=e.type;if("svg"===b?s="http://www.w3.org/2000/svg":"math"===b?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),null!=a)for(c=0;c<a.length;c++)if((p=a[c])&&"setAttribute"in p==!!b&&(b?p.localName===b:3===p.nodeType)){t=p,a[c]=null;break}if(null==t){if(null===b)return document.createTextNode(y);t=document.createElementNS(s,b,y.is&&y),a=null,r=!1}if(null===b)m===y||r&&t.data===y||(t.data=y);else{if(a=a&&g.call(t.childNodes),m=n.props||T,!r&&null!=a)for(m={},c=0;c<t.attributes.length;c++)m[(p=t.attributes[c]).name]=p.value;for(c in m)if(p=m[c],"children"==c);else if("dangerouslySetInnerHTML"==c)h=p;else if("key"!==c&&!(c in y)){if("value"==c&&"defaultValue"in y||"checked"==c&&"defaultChecked"in y)continue;B(t,c,null,p,s)}for(c in y)p=y[c],"children"==c?_=p:"dangerouslySetInnerHTML"==c?u=p:"value"==c?f=p:"checked"==c?d=p:"key"===c||r&&"function"!=typeof p||m[c]===p||B(t,c,p,m[c],s);if(u)r||h&&(u.__html===h.__html||u.__html===t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(h&&(t.innerHTML=""),U(t,C(_)?_:[_],e,n,i,"foreignObject"===b?"http://www.w3.org/1999/xhtml":s,a,o,a?a[0]:n.__k&&H(n,0),r,l),null!=a)for(c=a.length;c--;)null!=a[c]&&E(a[c]);r||(c="value",void 0!==f&&(f!==t[c]||"progress"===b&&!f||"option"===b&&f!==m[c])&&B(t,c,f,m[c],s),c="checked",void 0!==d&&d!==t[c]&&B(t,c,d,m[c],s))}return t}function Z(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){m.__e(t,n)}}function Q(t,e,n){var i,s;if(m.unmount&&m.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||Z(i,null,e)),null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(t){m.__e(t,e)}i.base=i.__P=null}if(i=t.__k)for(s=0;s<i.length;s++)i[s]&&Q(i[s],e,n||"function"!=typeof t.type);n||null==t.__e||E(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function X(t,e,n){return this.constructor(t,n)}g=D.slice,m={__e:function(t,e,n,i){for(var s,a,o;e=e.__;)if((s=e.__c)&&!s.__)try{if((a=s.constructor)&&null!=a.getDerivedStateFromError&&(s.setState(a.getDerivedStateFromError(t)),o=s.__d),null!=s.componentDidCatch&&(s.componentDidCatch(t,i||{}),o=s.__d),o)return s.__E=s}catch(e){t=e}throw t}},y=0,F.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=x({},this.state),"function"==typeof t&&(t=t(x({},n),this.props)),t&&x(n,t),null!=t&&this.__v&&(e&&this._sb.push(e),R(this))},F.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),R(this))},F.prototype.render=O,b=[],N="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,P=function(t,e){return t.__v.__b-e.__v.__b},$.__r=0,S=0,w=q(!1),k=q(!0);class Y{callbacks={};init(t){t&&!this.callbacks[t]&&(this.callbacks[t]=[])}listeners(){return this.callbacks}addListener(t,e){return this.on(t,e)}on(t,e){return this.init(t),this.callbacks[t].push(e),this}off(t,e){const n=t;return this.init(),this.callbacks[n]&&0!==this.callbacks[n].length?(this.callbacks[n]=this.callbacks[n].filter((t=>t!=e)),this):this}async emit(t,...e){const n=t;return this.init(n),this.callbacks[n].length>0&&(await Promise.all(this.callbacks[n].map((async t=>await t(...e)))),!0)}once(t,e){const n=async(...i)=>{await e(...i),this.off(t,n)};return this.on(t,n)}}class tt extends Y{static version="1.0.5";static instances=[];static firstLoad=!0;instanceID;options=d;pageData={isAsync:!1,direction:0,currentPage:0,totalNumber:0,totalPage:0};container=null;element=null;disabled=!1;isDynamicTotalNumber=!1;constructor(t,e){return super(),this.instanceID=f.generateRandom(6),this.container=f.isString(t)?f.getElem(t):t,this.initialize(e).then((t=>{this.bindEvents(),this.observer(),this.emit("afterInit",t),this.initPageTrigger()})),tt.instances.push(this),1===tt.instances.length&&!0===tt.firstLoad&&console.log(`Paginator is loaded, version: ${tt.version}`),tt.firstLoad=!1,this}async initialize(t){this.options=f.deepMerge({},d,t);const e=await this.parseDataSource(this.options.dataSource);this.pageData.isAsync=f.isString(e),this.pageData.totalNumber=f.isArray(e)?e.length:0,this.isDynamicTotalNumber=f.isFunction(this.options.totalNumberLocator)&&this.pageData.isAsync;const n=this.renderHTML(!0);return this.options.className&&n.classList.add(this.options.className),n}async parseDataSource(t){return new Promise(((e,n)=>{if(f.isObject(t))e(this.options.dataSource=this.filterDataWithLocator(t));else if(f.isArray(t))e(this.options.dataSource=t);else if(f.isFunction(t)){if(!f.isFunction(this.options.dataSource))return void n('The type of "dataSource" is a Function, but "options.dataSource" is not a Function.');this.options.dataSource((t=>{f.isArray(t)||n('The parameter of "done" Function should be an Array.'),this.parseDataSource(t).then(e).catch(n)}))}else f.isString(t)?(/^https?|file:/.test(t)||(t=(t=new URL(t,window.location.href)).toString()),e(t)):n("Unexpected dataSource type")}))}async initPageTrigger(){let t=this.pageData.currentPage||this.options.pageNumber;this.element&&(this.isDynamicTotalNumber&&this.options.resetPageNumberOnInit&&(t=1),this.options.triggerPagingOnInit&&this.emit("go",Math.min(t,Math.max(this.getTotalPage(),1))))}renderHTML(t=!1){const e=this.options,n=this.getTotalPage();if(t){const t=document.createElement("div");t.className="paginator",t.dataset.instanceId=this.instanceID,e.className&&t.classList.add(e.className),this.container&&("bottom"===e.position?this.container.appendChild(t):this.container.insertBefore(t,this.container.firstChild)),this.element=t}const i=this.element;this.emit("beforeRender",!0!==t);const s=this.pageData.currentPage||e.pageNumber,a=e.pageRange||0;let o=s-a,r=s+a;r>n&&(r=n,o=n-2*a,o=o<1?1:o),o<=1&&(o=1,r=Math.min(2*a+1,n));return function(t,e,n){var i,s,a,o;m.__&&m.__(t,e),s=(i="function"==typeof n)?null:e.__k,a=[],o=[],G(e,t=(!i&&n||e).__k=M(O,null,[t]),s||T,T,e.namespaceURI,!i&&n?[n]:s?null:e.firstChild?g.call(e.childNodes):null,a,!i&&n?n:s?s.__e:e.firstChild,i,o),V(a,t,o)}(this.generateHTML(s,o,r),i),e.hideOnlyOnePage&&n<=1?this.element.style.display="none":this.element.style.display="",this.emit("afterRender",!0!==t),i}renderData(t,e,n){if(this.emit("beforePaging",e),this.pageData.direction=e>this.pageData.currentPage?1:-1,this.pageData.currentPage=e,this.renderHTML(),this.disabled&&this.pageData.isAsync&&this.enable(),"function"==typeof this.options.formatResult){let e=f.deepMerge([],t);f.isArray(t=this.options.formatResult(e))||(t=e)}this.doCallback(t,n),this.emit("afterPaging",e),1===e?this.emit("afterIsFirstPage"):e===this.getTotalPage()&&this.emit("afterIsLastPage")}doCallback(t,e){"function"==typeof e?e(t,this.pageData):"function"==typeof this.options.callback&&this.options.callback(t,this)}observer(){const t=this.element;t&&t.addEventListener("click",(async t=>{let e=t.target;if(!f.isPageItem(e)){const t=f.hasParent(e,"li",5,!0);if(!t)return;e=t}const n=e.getAttribute("data-num");if(e.classList.contains("J-paginator-page")&&n&&(this.emit("beforePageOnClick",t,n),this.emit("go",parseInt(n,10)),this.emit("afterPageOnClick",t,n)),e.classList.contains("J-paginator-previous")&&n&&(this.emit("beforePreviousOnClick",t,n),this.emit("go",parseInt(n,10)),this.emit("afterPreviousOnClick",t,n)),e.classList.contains("J-paginator-next")&&n&&(this.emit("beforeNextOnClick",t,n),this.emit("go",parseInt(n,10)),this.emit("afterNextOnClick",t,n)),e.classList.contains("J-paginator-go-button")){const e=f.getElem(".J-paginator-go-pagenumber");if(!e)return;const n=e.value;this.emit("beforeGoButtonOnClick",t,n),this.emit("go",parseInt(n,10)),this.emit("afterGoButtonOnClick",t,n)}if(e.classList.contains("J-paginator-size-select")){const n=parseInt(e.value,10),i=this.pageData.currentPage||this.options.pageNumber;this.emit("beforeSizeSelectorChange",t,n),this.options.pageSize=n,this.pageData.currentPage=n,this.pageData.totalPage=this.getTotalPage(),i>this.pageData.totalPage&&(this.pageData.currentPage=this.pageData.totalPage),this.emit("go",this.pageData.currentPage),this.emit("afterSizeSelectorChange",t,n)}}))}getPagingData(t){const e=this.options.dataSource,n=this.options.pageSize||0,i=this.getTotalNumber(),s=n*(t-1)+1,a=Math.min(t*n,i);return f.isArray(e)?e.slice(s-1,a):[]}getTotalNumber(){return this.pageData.totalNumber||this.options.totalNumber||0}getTotalPage(){const t=this.options.pageSize||0;return Math.ceil(this.getTotalNumber()/t)}getLocator(t){let e;return"string"==typeof t?e=t:"function"==typeof t?e=t():f.throwError('"locator" is incorrect. Expect string or function type.'),e}filterDataWithLocator(t){const e=this.getLocator(this.options.locator);let n=t;if(f.isString(e)||f.throwError("locator is incorrect. Expect string type."),f.isObject(t))try{e.split(".").forEach((t=>{n=n[t]})),f.isArray(n)||f.throwError("dataSource."+e+" should be an Array.")}catch(t){f.throwError(`Error accessing dataSource.${e}: ${t}`)}return n}bindEvents(){this.on("go",(async(t,e)=>await this.go(t,e))),this.on("previous",(async t=>await this.previous(t))),this.on("next",(async t=>await this.next(t))),this.on("disable",(()=>this.disable())),this.on("enable",(()=>this.enable())),this.on("show",(()=>this.show())),this.on("hide",(()=>this.hide())),this.on("destroy",(()=>this.destroy()))}unbindEvents(){this.off("go",(async(t,e)=>await this.go(t,e))),this.off("previous",(async t=>await this.previous(t))),this.off("next",(async t=>await this.next(t))),this.off("disable",(()=>this.disable())),this.off("enable",(()=>this.enable())),this.off("show",(()=>this.show())),this.off("hide",(()=>this.hide())),this.off("destroy",(()=>this.destroy()))}getPageLinkTag(t){const e=this.options.pageLink;return M("a",e?{href:e}:null,t)}generatePageNumbersHTML(t){const e=this.options,n=t.currentPage,i=this.getTotalPage(),s=t.rangeStart,a=t.rangeEnd,o=this.getPageLinkTag.bind(this),r=e.ellipsisText,l=e.classPrefix,c=e.pageClassName||"",u=e.activeClassName||"",h=e.disableClassName||"",_=[];if(null===e.pageRange){for(let t=1;t<=i;t++)_.push(M("li",{class:f.composeClassNames(`${l}-page`,"J-paginator-page",c,t===n?u:""),"data-num":t.toString()},o(t)));return _}if(s<=3)for(let t=1;t<s;t++)_.push(M("li",{class:f.composeClassNames(`${l}-page`,"J-paginator-page",c,t===n?u:""),"data-num":t.toString()},o(t)));else e.hideFirstOnEllipsisShow||_.push(M("li",{class:f.composeClassNames(`${l}-page`,`${l}-first`,"J-paginator-page",c),"data-num":"1"},o(1))),_.push(M("li",{class:f.composeClassNames(`${l}-ellipsis`,h)},M("a",{dangerouslySetInnerHTML:{__html:r}})));for(let t=s;t<=a;t++)_.push(M("li",{class:f.composeClassNames(`${l}-page`,"J-paginator-page",c,t===n?u:""),"data-num":t.toString()},o(t)));if(a>=i-2)for(let t=a+1;t<=i;t++)_.push(M("li",{class:f.composeClassNames(`${l}-page`,"J-paginator-page",c),"data-num":t.toString()},o(t)));else _.push(M("li",{class:f.composeClassNames(`${l}-ellipsis`,h)},M("a",{dangerouslySetInnerHTML:{__html:r}}))),e.hideLastOnEllipsisShow||_.push(M("li",{class:f.composeClassNames(`${l}-page`,`${l}-last`,"J-paginator-page",c),"data-num":i.toString()},o(i)));return _}generateHTML(t,e,n){const i=this.options,s=this.getTotalPage(),a=this.getTotalNumber(),o=i.pageSize||0,r=i.prevText,l=i.nextText,c=i.classPrefix||"",u=i.disableClassName||"",h=i.ulClassName||"",_=i.prevClassName||"",p=i.nextClassName||"",d="function"==typeof i.formatNavigator?i.formatNavigator(t,s,a):i.formatNavigator,g=i.autoHidePrevious??!1,m=i.autoHideNext??!1,y="function"==typeof i.header?i.header(t,s,a):i.header,b="function"==typeof i.footer?i.footer(t,s,a):i.footer,v=[];i.showPrevious&&(t<=1?g||v.push(M("li",{class:f.composeClassNames(`${c}-prev`,u,_)},M("a",{dangerouslySetInnerHTML:{__html:r}}))):v.push(M("li",{class:f.composeClassNames(`${c}-prev`,"J-paginator-previous",_),"data-num":t-1,title:"Previous page"},M("a",{dangerouslySetInnerHTML:{__html:r}})))),i.showPageNumbers&&v.push(...this.generatePageNumbersHTML({currentPage:t,rangeStart:e,rangeEnd:n})),i.showNext&&(t>=s?m||v.push(M("li",{class:f.composeClassNames(`${c}-next`,u,p)},M("a",{dangerouslySetInnerHTML:{__html:l}}))):v.push(M("li",{class:f.composeClassNames(`${c}-next`,"J-paginator-next",p),"data-num":t+1,title:"Next page"},M("a",{dangerouslySetInnerHTML:{__html:l}}))));const N=[y&&M("div",{class:"paginator-header",dangerouslySetInnerHTML:{__html:this.replaceVariables(y,{currentPage:t,totalPage:s,totalNumber:a})}}),i.showNavigator&&d&&M("div",{class:f.composeClassNames(`${c}-nav J-paginator-nav`),dangerouslySetInnerHTML:{__html:this.replaceVariables(d,{currentPage:t,totalPage:s,totalNumber:a,rangeStart:(t-1)*o+1,rangeEnd:Math.min(t*o,a)})}}),M("div",{class:"paginator-pages"},M("ul",{class:h},...v)),b&&M("div",{class:"paginator-footer",dangerouslySetInnerHTML:{__html:this.replaceVariables(b,{currentPage:t,totalPage:s,totalNumber:a})}})].filter(Boolean);return M("div",{class:"paginator-container"},...N)}findTotalNumberFromRemoteResponse(t){let e=0;f.isFunction(this.options.totalNumberLocator)&&(e=this.options.totalNumberLocator(t),f.isNumeric(e)||f.throwError("totalNumberLocator should return a number."),this.pageData.totalNumber=e)}async go(t,e){if(this.disabled||!this.element)return;if(!(t=parseInt(t,10))||t<1)return;const n=this.options.pageSize,i=this.getTotalNumber(),s=this.getTotalPage();if(i>0&&t>s)return;if(!this.pageData.isAsync)return void this.renderData(this.getPagingData(t),t,e);const a={},o=this.options.alias||{},r=o.pageSize||"pageSize",l=o.pageNumber||"pageNumber";a[r]=n,a[l]=t;const c=f.isFunction(this.options.dataLoader)?this.options.dataLoader():this.options.dataLoader;c&&c.pageNumberStartWithZero&&(a[l]=t-1);const u={url:this.options.dataSource,method:c?.method,data:c?.data?"function"==typeof c.data?await c.data(c):f.deepMerge({},c?.data,a):a,headers:c?.headers,mode:c?.mode,cache:c?.cache,credentials:c?.credentials||"same-origin",beforeSend:()=>{this.disable(),c?.beforeSend&&c.beforeSend(c)},success:n=>{this.isDynamicTotalNumber?this.findTotalNumberFromRemoteResponse(n):this.pageData.totalNumber=this.options.totalNumber;const i=this.filterDataWithLocator(n);this.renderData(i,t,e),this.enable()},errorCallback:t=>{if("function"!=typeof this.options.onError)throw t;this.options.onError(t),this.enable()}};f.isFunction(this.options.dataLoaderFunction)?this.options.dataLoaderFunction(this):await f.fetchData(u)}destroy(){this.emit("beforeDestroy"),this.element&&(this.element.remove(),this.element=null),this.container&&(this.container.innerHTML=""),this.unbindEvents(),tt.instances=tt.instances.filter((t=>t!==this)),this.emit("afterDestroy")}async previous(t){this.pageData.currentPage>1&&this.emit("go",this.pageData.currentPage-1,t)}async next(t){this.pageData.currentPage<this.getTotalPage()&&this.emit("go",this.pageData.currentPage+1,t)}disable(){const t=this.pageData.isAsync?"async":"sync";this.emit("beforeDisable",t),this.disabled=!0,this.emit("afterDisable",t)}enable(){const t=this.pageData.isAsync?"async":"sync";this.emit("beforeEnable",t),this.disabled=!1,this.emit("afterEnable",t)}show(){this.element&&"none"===this.element.style.display&&(this.element.style.display="")}hide(){this.element&&"none"!==this.element.style.display&&(this.element.style.display="none")}replaceVariables(t,e){let n=t;for(const t in e){const i=e[t],s=new RegExp(`<%=\\s*${t}\\s*%>`,"img");n=n.replace(s,i)}return n}get version(){return tt.version}}return tt}));
