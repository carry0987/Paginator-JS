!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Paginator=t()}(this,(function(){"use strict";function e(...e){console.error(...e)}function t(e){throw new Error(e)}var n=Object.freeze({__proto__:null,reportError:e,throwError:t});function s(e,t,n){if("string"!=typeof e)return e;let s=document;return null===t&&n?s=n:t&&t instanceof Node&&"querySelector"in t?s=t:n&&n instanceof Node&&"querySelector"in n&&(s=n),"all"===t?s.querySelectorAll(e):s.querySelector(e)}function i(e,t,n=1/0,s=!1){let i=e.parentElement,a=0;for(;i&&a<n;){if(i.matches(t))return!s||i;i=i.parentElement,a++}return!!s&&null}function a(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function o(e){return"function"==typeof e}function r(e){return"string"==typeof e}function l(e){return Array.isArray(e)}function c(e){return"number"!=typeof e&&(!e||"string"==typeof e&&0===e.length)}function u(e,...t){if(!t.length)return e;const n=t.shift();if(n)for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t],i=t;a(s)||l(s)?(e[i]&&"object"==typeof e[i]||(e[i]=Array.isArray(s)?[]:{}),u(e[i],s)):e[i]=s}return u(e,...t)}function h(e=8){return Math.random().toString(36).substring(2,2+e)}function _(e,t,n){return new CustomEvent(e,{detail:t,...n})}var p=Object.freeze({__proto__:null,addEventListener:function(e,t,n,s){e.addEventListener(t,n,s)},createEvent:_,dispatchEvent:function(n,s=document,i,a){try{if("string"==typeof n){let e=_(n,i,a);return s.dispatchEvent(e)}if(n instanceof Event)return s.dispatchEvent(n);t("Invalid event type")}catch(t){return e("Dispatch Event Error:",t),!1}},removeEventListener:function(e,t,n,s){e.removeEventListener(t,n,s)}});function f(e,t=new FormData){const{data:n,parentKey:s=""}=e;if(null!==n&&"object"==typeof n)if(n instanceof Blob||n instanceof File){const e=s||"file";t.append(e,n)}else Object.keys(n).forEach((e=>{const i=n[e],a=s?`${s}[${e}]`:e;null!==i&&"object"==typeof i?f({data:i,parentKey:a},t):null!==i&&t.append(a,String(i))}));else null!==n&&t.append(s,n);return t}function d(e,t=""){if(e instanceof FormData)return e;return f({data:e,parentKey:t})}async function g(e){const{url:t,method:n="GET",headers:s={},cache:i="no-cache",mode:a="cors",credentials:o="same-origin",body:r=null,beforeSend:l=null,success:c=null,error:u=null}=e;let h,_=t,p={method:n,mode:a,headers:s instanceof Headers?s:new Headers(s),cache:i,credentials:o};if(null!==r&&"GET"===n.toUpperCase())_=function(e,t,n=!0){const s=new URL(e);for(const[e,i]of Object.entries(t)){const t=null===i?"":String(i);!n&&s.searchParams.has(e)||s.searchParams.set(e,t)}return s.toString()}("string"==typeof t?t:t.toString(),r,!0);else if(null!==r&&["PUT","POST","DELETE"].includes(n.toUpperCase())){let e=r;r instanceof FormData||(e=JSON.stringify(r),p.headers instanceof Headers||(p.headers=new Headers(p.headers)),p.headers.append("Content-Type","application/json")),p.body=e}if("string"==typeof _||_ instanceof URL)h=new Request(_,p);else{if(!(_ instanceof Request))throw new Error("Invalid URL type");h=_}try{const e=await new Promise((e=>{l?.(),e(h)})),t=await fetch(e),n=await t.json();return c?.(n),n}catch(e){throw u?.(e),e}}async function m(e){const{url:t,data:n,method:s="POST",headers:i,cache:a,mode:o,credentials:r,success:l,errorCallback:c,beforeSend:u,encode:h=!0}=e;return g({url:t,method:s,headers:i,cache:a,mode:o,credentials:r,body:h&&"GET"!==s.toUpperCase()?d(n):n,beforeSend:u,success:e=>{l?.(e)},error:e=>{c?.(e)}})}async function y(e){const{url:t,data:n,method:s="POST",headers:i,cache:a,mode:o,credentials:r,success:l,errorCallback:c,beforeSend:u}=e;return g({url:t,method:s,headers:i,cache:a,mode:o,credentials:r,body:d(n),beforeSend:u,success:e=>{l?.(e)},error:e=>{c?.(e)}}).then((()=>!0)).catch((()=>!1))}const b=m,v=y;var N=Object.freeze({__proto__:null,doFetch:g,fetchData:b,sendData:m,sendForm:v,sendFormData:y});class P{static throwError=n.throwError;static getElem=s;static hasParent=i;static deepMerge=u;static generateRandom=h;static isEmpty=c;static isObject=a;static isArray=l;static isString=r;static isFunction=o;static createEvent=p.createEvent;static addEventListener=p.addEventListener;static removeEventListener=p.removeEventListener;static dispatchEvent=p.dispatchEvent;static fetchData=N.fetchData;static isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}static composeClassNames(...e){return(e=e.filter((e=>!!e))).length>0?e.join(" "):""}static isPageItem(e){const t=["J-pagination-page","J-pagination-previous","J-pagination-next"],n=e.classList;for(let e=0;e<t.length;e++)if(n.contains(t[e]))return!0;return!1}}const S={dataSource:[],locator:"data",totalNumber:0,totalNumberLocator:null,pageNumber:1,pageSize:10,pageRange:2,alias:{pageNumber:"pageNumber",pageSize:"pageSize"},showPrevious:!0,showNext:!0,showPageNumbers:!0,showNavigator:!1,hideFirstOnEllipsisShow:!1,hideLastOnEllipsisShow:!1,autoHidePrevious:!1,autoHideNext:!1,classPrefix:"pagination",className:"",activeClassName:"active",disableClassName:"disabled",ulClassName:"",pageClassName:"",prevClassName:"",nextClassName:"",prevText:"&laquo;",nextText:"&raquo;",ellipsisText:"...",goButtonText:"Go",formatNavigator:"{currentPage} of {totalPage}",header:"",footer:"",pageLink:"",position:"bottom",formatResult:e=>e,dataLoader:{method:"GET",data:{},cache:"no-cache",headers:{"Content-Type":"application/json"},mode:"cors",beforeSend:e=>e,credentials:"same-origin",pageNumberStartWithZero:!1},triggerPagingOnInit:!0,resetPageNumberOnInit:!1,hideOnlyOnePage:!1,onError:e=>console.error("Pagination error:",e)};var w,k,E,L,T,D,C,x,M,O,I={},F=[],H=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,A=Array.isArray;function R(e,t){for(var n in t)e[n]=t[n];return e}function $(e){var t=e.parentNode;t&&t.removeChild(e)}function U(e,t,n){var s,i,a,o={};for(a in t)"key"==a?s=t[a]:"ref"==a?i=t[a]:o[a]=t[a];if(arguments.length>2&&(o.children=arguments.length>3?w.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===o[a]&&(o[a]=e.defaultProps[a]);return j(e,o,s,i,null)}function j(e,t,n,s,i){var a={type:e,props:t,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==i?++E:i,__i:-1,__u:0};return null==i&&null!=k.vnode&&k.vnode(a),a}function z(e){return e.children}function J(e,t){this.props=e,this.context=t}function W(e,t){if(null==t)return e.__?W(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?W(e):null}function B(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return B(e)}}function q(e){(!e.__d&&(e.__d=!0)&&L.push(e)&&!G.__r++||T!==k.debounceRendering)&&((T=k.debounceRendering)||D)(G)}function G(){var e,t,n,s,i,a,o,r;for(L.sort(C);e=L.shift();)e.__d&&(t=L.length,s=void 0,a=(i=(n=e).__v).__e,o=[],r=[],n.__P&&((s=R({},i)).__v=i.__v+1,k.vnode&&k.vnode(s),te(n.__P,s,i,n.__n,n.__P.namespaceURI,32&i.__u?[a]:null,o,null==a?W(i):a,!!(32&i.__u),r),s.__v=i.__v,s.__.__k[s.__i]=s,ne(o,s,r),s.__e!=a&&B(s)),L.length>t&&L.sort(C));G.__r=0}function V(e,t,n,s,i,a,o,r,l,c,u){var h,_,p,f,d,g=s&&s.__k||F,m=t.length;for(n.__d=l,K(n,t,g),l=n.__d,h=0;h<m;h++)null!=(p=n.__k[h])&&"boolean"!=typeof p&&"function"!=typeof p&&(_=-1===p.__i?I:g[p.__i]||I,p.__i=h,te(e,p,_,i,a,o,r,l,c,u),f=p.__e,p.ref&&_.ref!=p.ref&&(_.ref&&ie(_.ref,null,p),u.push(p.ref,p.__c||f,p)),null==d&&null!=f&&(d=f),65536&p.__u||_.__k===p.__k?(l&&!l.isConnected&&(l=W(_)),l=Z(p,l,e)):"function"==typeof p.type&&void 0!==p.__d?l=p.__d:f&&(l=f.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=l,n.__e=d}function K(e,t,n){var s,i,a,o,r,l=t.length,c=n.length,u=c,h=0;for(e.__k=[],s=0;s<l;s++)o=s+h,null!=(i=e.__k[s]=null==(i=t[s])||"boolean"==typeof i||"function"==typeof i?null:"string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?j(null,i,null,null,null):A(i)?j(z,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?j(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)?(i.__=e,i.__b=e.__b+1,r=Q(i,n,o,u),i.__i=r,a=null,-1!==r&&(u--,(a=n[r])&&(a.__u|=131072)),null==a||null===a.__v?(-1==r&&h--,"function"!=typeof i.type&&(i.__u|=65536)):r!==o&&(r===o+1?h++:r>o?u>l-o?h+=r-o:h--:r<o?r==o-1&&(h=r-o):h=0,r!==s+h&&(i.__u|=65536))):(a=n[o])&&null==a.key&&a.__e&&!(131072&a.__u)&&(a.__e==e.__d&&(e.__d=W(a)),ae(a,a,!1),n[o]=null,u--);if(u)for(s=0;s<c;s++)null!=(a=n[s])&&!(131072&a.__u)&&(a.__e==e.__d&&(e.__d=W(a)),ae(a,a))}function Z(e,t,n){var s,i;if("function"==typeof e.type){for(s=e.__k,i=0;s&&i<s.length;i++)s[i]&&(s[i].__=e,t=Z(s[i],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function Q(e,t,n,s){var i=e.key,a=e.type,o=n-1,r=n+1,l=t[n];if(null===l||l&&i==l.key&&a===l.type&&!(131072&l.__u))return n;if(s>(null==l||131072&l.__u?0:1))for(;o>=0||r<t.length;){if(o>=0){if((l=t[o])&&!(131072&l.__u)&&i==l.key&&a===l.type)return o;o--}if(r<t.length){if((l=t[r])&&!(131072&l.__u)&&i==l.key&&a===l.type)return r;r++}}return-1}function X(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||H.test(t)?n:n+"px"}function Y(e,t,n,s,i){var a;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof s&&(e.style.cssText=s=""),s)for(t in s)n&&t in n||X(e.style,t,"");if(n)for(t in n)s&&n[t]===s[t]||X(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])a=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?s?n.u=s.u:(n.u=x,e.addEventListener(t,a?O:M,a)):e.removeEventListener(t,a?O:M,a);else{if("http://www.w3.org/2000/svg"==i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function ee(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=x++;else if(t.t<n.u)return;return n(k.event?k.event(t):t)}}}function te(e,t,n,s,i,a,o,r,l,c){var u,h,_,p,f,d,g,m,y,b,v,N,P,S,w,E=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),a=[r=t.__e=n.__e]),(u=k.__b)&&u(t);e:if("function"==typeof E)try{if(m=t.props,y=(u=E.contextType)&&s[u.__c],b=u?y?y.props.value:u.__:s,n.__c?g=(h=t.__c=n.__c).__=h.__E:("prototype"in E&&E.prototype.render?t.__c=h=new E(m,b):(t.__c=h=new J(m,b),h.constructor=E,h.render=oe),y&&y.sub(h),h.props=m,h.state||(h.state={}),h.context=b,h.__n=s,_=h.__d=!0,h.__h=[],h._sb=[]),null==h.__s&&(h.__s=h.state),null!=E.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=R({},h.__s)),R(h.__s,E.getDerivedStateFromProps(m,h.__s))),p=h.props,f=h.state,h.__v=t,_)null==E.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==E.getDerivedStateFromProps&&m!==p&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(m,b),!h.__e&&(null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(m,h.__s,b)||t.__v===n.__v)){for(t.__v!==n.__v&&(h.props=m,h.state=h.__s,h.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),v=0;v<h._sb.length;v++)h.__h.push(h._sb[v]);h._sb=[],h.__h.length&&o.push(h);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(m,h.__s,b),null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(p,f,d)}))}if(h.context=b,h.props=m,h.__P=e,h.__e=!1,N=k.__r,P=0,"prototype"in E&&E.prototype.render){for(h.state=h.__s,h.__d=!1,N&&N(t),u=h.render(h.props,h.state,h.context),S=0;S<h._sb.length;S++)h.__h.push(h._sb[S]);h._sb=[]}else do{h.__d=!1,N&&N(t),u=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++P<25);h.state=h.__s,null!=h.getChildContext&&(s=R(R({},s),h.getChildContext())),_||null==h.getSnapshotBeforeUpdate||(d=h.getSnapshotBeforeUpdate(p,f)),V(e,A(w=null!=u&&u.type===z&&null==u.key?u.props.children:u)?w:[w],t,n,s,i,a,o,r,l,c),h.base=t.__e,t.__u&=-161,h.__h.length&&o.push(h),g&&(h.__E=h.__=null)}catch(e){t.__v=null,l||null!=a?(t.__e=r,t.__u|=l?160:32,a[a.indexOf(r)]=null):(t.__e=n.__e,t.__k=n.__k),k.__e(e,t,n)}else null==a&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=se(n.__e,t,n,s,i,a,o,l,c);(u=k.diffed)&&u(t)}function ne(e,t,n){t.__d=void 0;for(var s=0;s<n.length;s++)ie(n[s],n[++s],n[++s]);k.__c&&k.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){k.__e(e,t.__v)}}))}function se(e,t,n,s,i,a,o,r,l){var c,u,h,_,p,f,d,g=n.props,m=t.props,y=t.type;if("svg"===y?i="http://www.w3.org/2000/svg":"math"===y?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),null!=a)for(c=0;c<a.length;c++)if((p=a[c])&&"setAttribute"in p==!!y&&(y?p.localName===y:3===p.nodeType)){e=p,a[c]=null;break}if(null==e){if(null===y)return document.createTextNode(m);e=document.createElementNS(i,y,m.is&&m),a=null,r=!1}if(null===y)g===m||r&&e.data===m||(e.data=m);else{if(a=a&&w.call(e.childNodes),g=n.props||I,!r&&null!=a)for(g={},c=0;c<e.attributes.length;c++)g[(p=e.attributes[c]).name]=p.value;for(c in g)if(p=g[c],"children"==c);else if("dangerouslySetInnerHTML"==c)h=p;else if("key"!==c&&!(c in m)){if("value"==c&&"defaultValue"in m||"checked"==c&&"defaultChecked"in m)continue;Y(e,c,null,p,i)}for(c in m)p=m[c],"children"==c?_=p:"dangerouslySetInnerHTML"==c?u=p:"value"==c?f=p:"checked"==c?d=p:"key"===c||r&&"function"!=typeof p||g[c]===p||Y(e,c,p,g[c],i);if(u)r||h&&(u.__html===h.__html||u.__html===e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(h&&(e.innerHTML=""),V(e,A(_)?_:[_],t,n,s,"foreignObject"===y?"http://www.w3.org/1999/xhtml":i,a,o,a?a[0]:n.__k&&W(n,0),r,l),null!=a)for(c=a.length;c--;)null!=a[c]&&$(a[c]);r||(c="value",void 0!==f&&(f!==e[c]||"progress"===y&&!f||"option"===y&&f!==g[c])&&Y(e,c,f,g[c],i),c="checked",void 0!==d&&d!==e[c]&&Y(e,c,d,g[c],i))}return e}function ie(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){k.__e(e,n)}}function ae(e,t,n){var s,i;if(k.unmount&&k.unmount(e),(s=e.ref)&&(s.current&&s.current!==e.__e||ie(s,null,t)),null!=(s=e.__c)){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(e){k.__e(e,t)}s.base=s.__P=null}if(s=e.__k)for(i=0;i<s.length;i++)s[i]&&ae(s[i],t,n||"function"!=typeof e.type);n||null==e.__e||$(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function oe(e,t,n){return this.constructor(e,n)}w=F.slice,k={__e:function(e,t,n,s){for(var i,a,o;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&null!=a.getDerivedStateFromError&&(i.setState(a.getDerivedStateFromError(e)),o=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,s||{}),o=i.__d),o)return i.__E=i}catch(t){e=t}throw e}},E=0,J.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=R({},this.state),"function"==typeof e&&(e=e(R({},n),this.props)),e&&R(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),q(this))},J.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),q(this))},J.prototype.render=z,L=[],D="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,C=function(e,t){return e.__v.__b-t.__v.__b},G.__r=0,x=0,M=ee(!1),O=ee(!0);class re{callbacks={};init(e){this.callbacks||(this.callbacks={}),e&&!this.callbacks[e]&&(this.callbacks[e]=[])}listeners(){return this.callbacks}on(e,t){return this.init(e),this.callbacks[e].push(t),this}off(e,t){const n=e;return this.init(),this.callbacks[n]&&0!==this.callbacks[n].length?(this.callbacks[n]=this.callbacks[n].filter((e=>e!=t)),this):this}emit(e,...t){const n=e;return this.init(n),this.callbacks[n].length>0&&(this.callbacks[n].forEach((e=>e(...t))),!0)}once(e,t){const n=e,s=(...n)=>{t(...n),this.off(e,s)};return this.on(n,s)}}class le extends re{static version="1.0.2";static instances=[];static firstLoad=!0;instanceID;options=S;pageData={isAsync:!1,direction:0,currentPage:0,totalNumber:0,totalPage:0};container=null;element=null;disabled=!1;isDynamicTotalNumber=!1;constructor(e,t){return super(),this.instanceID=P.generateRandom(6),this.container=P.isString(e)?P.getElem(e):e,this.initialize(t).then((e=>{this.bindEvents(),this.observer(),this.emit("afterInit",e),this.initPageTrigger()})),le.instances.push(this),1===le.instances.length&&!0===le.firstLoad&&console.log(`Paginator is loaded, version: ${le.version}`),le.firstLoad=!1,this}async initialize(e){this.options=P.deepMerge({},S,e);const t=await this.parseDataSource(this.options.dataSource);this.pageData.isAsync=P.isString(t),this.pageData.totalNumber=P.isArray(t)?t.length:0,this.isDynamicTotalNumber=P.isFunction(this.options.totalNumberLocator)&&this.pageData.isAsync;const n=this.renderHTML(!0);return this.options.className&&n.classList.add(this.options.className),n}async parseDataSource(e){return new Promise(((t,n)=>{if(P.isObject(e))t(this.options.dataSource=this.filterDataWithLocator(e));else if(P.isArray(e))t(this.options.dataSource=e);else if(P.isFunction(e)){if(!P.isFunction(this.options.dataSource))return void n('The type of "dataSource" is a Function, but "options.dataSource" is not a Function.');this.options.dataSource((e=>{P.isArray(e)||n('The parameter of "done" Function should be an Array.'),this.parseDataSource(e).then(t).catch(n)}))}else P.isString(e)?(/^https?|file:/.test(e)||(e=(e=new URL(e,window.location.href)).toString()),t(e)):n("Unexpected dataSource type")}))}async initPageTrigger(){let e=this.pageData.currentPage||this.options.pageNumber;this.element&&(this.isDynamicTotalNumber&&this.options.resetPageNumberOnInit&&(e=1),this.options.triggerPagingOnInit&&this.emit("go",Math.min(e,Math.max(this.getTotalPage(),1))))}renderHTML(e=!1){const t=this.options,n=this.getTotalPage();if(e){const e=document.createElement("div");e.className="paginator",e.dataset.instanceId=this.instanceID,t.className&&e.classList.add(t.className),this.container&&("bottom"===t.position?this.container.appendChild(e):this.container.insertBefore(e,this.container.firstChild)),this.element=e}const s=this.element;this.emit("beforeRender",!0!==e);const i=this.pageData.currentPage||t.pageNumber,a=t.pageRange||0;let o=i-a,r=i+a;r>n&&(r=n,o=n-2*a,o=o<1?1:o),o<=1&&(o=1,r=Math.min(2*a+1,n));return function(e,t,n){var s,i,a,o;k.__&&k.__(e,t),i=(s="function"==typeof n)?null:t.__k,a=[],o=[],te(t,e=(!s&&n||t).__k=U(z,null,[e]),i||I,I,t.namespaceURI,!s&&n?[n]:i?null:t.firstChild?w.call(t.childNodes):null,a,!s&&n?n:i?i.__e:t.firstChild,s,o),ne(a,e,o)}(this.generateHTML(i,o,r),s),t.hideOnlyOnePage&&n<=1?this.element.style.display="none":this.element.style.display="",this.emit("afterRender",!0!==e),s}renderData(e,t,n){if(this.emit("beforePaging",t),this.pageData.direction=t>this.pageData.currentPage?1:-1,this.pageData.currentPage=t,this.renderHTML(),this.disabled&&this.pageData.isAsync&&this.enable(),"function"==typeof this.options.formatResult){let t=P.deepMerge([],e);P.isArray(e=this.options.formatResult(t))||(e=t)}this.doCallback(e,n),this.emit("afterPaging",t),1===t?this.emit("afterIsFirstPage"):t===this.getTotalPage()&&this.emit("afterIsLastPage")}doCallback(e,t){"function"==typeof t?t(e,this.pageData):"function"==typeof this.options.callback&&this.options.callback(e,this)}observer(){const e=this.element;e&&e.addEventListener("click",(async e=>{let t=e.target;if(!P.isPageItem(t)){const e=P.hasParent(t,"li",5,!0);if(!e)return;t=e}const n=t.getAttribute("data-num");if(t.classList.contains("J-paginator-page")&&n&&(this.emit("beforePageOnClick",e,n),this.emit("go",parseInt(n,10)),this.emit("afterPageOnClick",e,n)),t.classList.contains("J-paginator-previous")&&n&&(this.emit("beforePreviousOnClick",e,n),this.emit("go",parseInt(n,10)),this.emit("afterPreviousOnClick",e,n)),t.classList.contains("J-paginator-next")&&n&&(this.emit("beforeNextOnClick",e,n),this.emit("go",parseInt(n,10)),this.emit("afterNextOnClick",e,n)),t.classList.contains("J-paginator-go-button")){const t=P.getElem(".J-paginator-go-pagenumber");if(!t)return;const n=t.value;this.emit("beforeGoButtonOnClick",e,n),this.emit("go",parseInt(n,10)),this.emit("afterGoButtonOnClick",e,n)}if(t.classList.contains("J-paginator-size-select")){const n=parseInt(t.value,10),s=this.pageData.currentPage||this.options.pageNumber;this.emit("beforeSizeSelectorChange",e,n),this.options.pageSize=n,this.pageData.currentPage=n,this.pageData.totalPage=this.getTotalPage(),s>this.pageData.totalPage&&(this.pageData.currentPage=this.pageData.totalPage),this.emit("go",this.pageData.currentPage),this.emit("afterSizeSelectorChange",e,n)}}))}getPagingData(e){const t=this.options.dataSource,n=this.options.pageSize||0,s=this.getTotalNumber(),i=n*(e-1)+1,a=Math.min(e*n,s);return P.isArray(t)?t.slice(i-1,a):[]}getTotalNumber(){return this.pageData.totalNumber||this.options.totalNumber||0}getTotalPage(){const e=this.options.pageSize||0;return Math.ceil(this.getTotalNumber()/e)}getLocator(e){let t;return"string"==typeof e?t=e:"function"==typeof e?t=e():P.throwError('"locator" is incorrect. Expect string or function type.'),t}filterDataWithLocator(e){const t=this.getLocator(this.options.locator);let n=e;if(P.isString(t)||P.throwError("locator is incorrect. Expect string type."),P.isObject(e))try{t.split(".").forEach((e=>{n=n[e]})),P.isArray(n)||P.throwError("dataSource."+t+" should be an Array.")}catch(e){P.throwError(`Error accessing dataSource.${t}: ${e}`)}return n}bindEvents(){this.on("go",(async(e,t)=>await this.go(e,t))),this.on("previous",(async e=>await this.previous(e))),this.on("next",(async e=>await this.next(e))),this.on("disable",(()=>this.disable())),this.on("enable",(()=>this.enable())),this.on("show",(()=>this.show())),this.on("hide",(()=>this.hide())),this.on("destroy",(()=>this.destroy()))}unbindEvents(){this.off("go",(async(e,t)=>await this.go(e,t))),this.off("previous",(async e=>await this.previous(e))),this.off("next",(async e=>await this.next(e))),this.off("disable",(()=>this.disable())),this.off("enable",(()=>this.enable())),this.off("show",(()=>this.show())),this.off("hide",(()=>this.hide())),this.off("destroy",(()=>this.destroy()))}getPageLinkTag(e){const t=this.options.pageLink;return U("a",t?{href:t}:null,e)}generatePageNumbersHTML(e){const t=this.options,n=e.currentPage,s=this.getTotalPage(),i=e.rangeStart,a=e.rangeEnd,o=this.getPageLinkTag.bind(this),r=t.ellipsisText,l=t.classPrefix,c=t.pageClassName||"",u=t.activeClassName||"",h=t.disableClassName||"",_=[];if(null===t.pageRange){for(let e=1;e<=s;e++)_.push(U("li",{class:P.composeClassNames(`${l}-page`,"J-paginator-page",c,e===n?u:""),"data-num":e.toString()},o(e)));return _}if(i<=3)for(let e=1;e<i;e++)_.push(U("li",{class:P.composeClassNames(`${l}-page`,"J-paginator-page",c,e===n?u:""),"data-num":e.toString()},o(e)));else t.hideFirstOnEllipsisShow||_.push(U("li",{class:P.composeClassNames(`${l}-page`,`${l}-first`,"J-paginator-page",c),"data-num":"1"},o(1))),_.push(U("li",{class:P.composeClassNames(`${l}-ellipsis`,h)},U("a",{dangerouslySetInnerHTML:{__html:r}})));for(let e=i;e<=a;e++)_.push(U("li",{class:P.composeClassNames(`${l}-page`,"J-paginator-page",c,e===n?u:""),"data-num":e.toString()},o(e)));if(a>=s-2)for(let e=a+1;e<=s;e++)_.push(U("li",{class:P.composeClassNames(`${l}-page`,"J-paginator-page",c),"data-num":e.toString()},o(e)));else _.push(U("li",{class:P.composeClassNames(`${l}-ellipsis`,h)},U("a",{dangerouslySetInnerHTML:{__html:r}}))),t.hideLastOnEllipsisShow||_.push(U("li",{class:P.composeClassNames(`${l}-page`,`${l}-last`,"J-paginator-page",c),"data-num":s.toString()},o(s)));return _}generateHTML(e,t,n){const s=this.options,i=this.getTotalPage(),a=this.getTotalNumber(),o=s.pageSize||0,r=s.prevText,l=s.nextText,c=s.classPrefix||"",u=s.disableClassName||"",h=s.ulClassName||"",_=s.prevClassName||"",p=s.nextClassName||"",f="function"==typeof s.formatNavigator?s.formatNavigator(e,i,a):s.formatNavigator,d=s.autoHidePrevious??!1,g=s.autoHideNext??!1,m="function"==typeof s.header?s.header(e,i,a):s.header,y="function"==typeof s.footer?s.footer(e,i,a):s.footer,b=[];s.showPrevious&&(e<=1?d||b.push(U("li",{class:P.composeClassNames(`${c}-prev`,u,_)},U("a",{dangerouslySetInnerHTML:{__html:r}}))):b.push(U("li",{class:P.composeClassNames(`${c}-prev`,"J-paginator-previous",_),"data-num":e-1,title:"Previous page"},U("a",{dangerouslySetInnerHTML:{__html:r}})))),s.showPageNumbers&&b.push(...this.generatePageNumbersHTML({currentPage:e,rangeStart:t,rangeEnd:n})),s.showNext&&(e>=i?g||b.push(U("li",{class:P.composeClassNames(`${c}-next`,u,p)},U("a",{dangerouslySetInnerHTML:{__html:l}}))):b.push(U("li",{class:P.composeClassNames(`${c}-next`,"J-paginator-next",p),"data-num":e+1,title:"Next page"},U("a",{dangerouslySetInnerHTML:{__html:l}}))));const v=[m&&U("div",{class:"paginator-header",dangerouslySetInnerHTML:{__html:this.replaceVariables(m,{currentPage:e,totalPage:i,totalNumber:a})}}),s.showNavigator&&f&&U("div",{class:P.composeClassNames(`${c}-nav J-paginator-nav`),dangerouslySetInnerHTML:{__html:this.replaceVariables(f,{currentPage:e,totalPage:i,totalNumber:a,rangeStart:(e-1)*o+1,rangeEnd:Math.min(e*o,a)})}}),U("div",{class:"paginator-pages"},U("ul",{class:h},...b)),y&&U("div",{class:"paginator-footer",dangerouslySetInnerHTML:{__html:this.replaceVariables(y,{currentPage:e,totalPage:i,totalNumber:a})}})].filter(Boolean);return U("div",{class:"paginator-container"},...v)}findTotalNumberFromRemoteResponse(e){let t=0;P.isFunction(this.options.totalNumberLocator)&&(t=this.options.totalNumberLocator(e),P.isNumeric(t)||P.throwError("totalNumberLocator should return a number."),this.pageData.totalNumber=t)}async go(e,t){if(this.disabled||!this.element)return;if(!(e=parseInt(e,10))||e<1)return;const n=this.options.pageSize,s=this.getTotalNumber(),i=this.getTotalPage();if(s>0&&e>i)return;if(!this.pageData.isAsync)return void this.renderData(this.getPagingData(e),e,t);const a={},o=this.options.alias||{},r=o.pageSize||"pageSize",l=o.pageNumber||"pageNumber";a[r]=n,a[l]=e;const c=P.isFunction(this.options.dataLoader)?this.options.dataLoader():this.options.dataLoader;c&&c.pageNumberStartWithZero&&(a[l]=e-1);const u={url:this.options.dataSource,method:c?.method,data:c?.data?"function"==typeof c.data?await c.data(c):P.deepMerge({},c?.data,a):a,headers:c?.headers,mode:c?.mode,cache:c?.cache,credentials:c?.credentials||"same-origin",beforeSend:()=>{this.disable(),c?.beforeSend&&c.beforeSend(c)},success:n=>{this.isDynamicTotalNumber?this.findTotalNumberFromRemoteResponse(n):this.pageData.totalNumber=this.options.totalNumber;const s=this.filterDataWithLocator(n);this.renderData(s,e,t),this.enable()},errorCallback:e=>{if("function"!=typeof this.options.onError)throw e;this.options.onError(e),this.enable()}};P.isFunction(this.options.dataLoaderFunction)?this.options.dataLoaderFunction(this):await P.fetchData(u)}destroy(){this.emit("beforeDestroy"),this.element&&(this.element.remove(),this.element=null),this.container&&(this.container.innerHTML=""),this.unbindEvents(),le.instances=le.instances.filter((e=>e!==this)),this.emit("afterDestroy")}async previous(e){this.pageData.currentPage>1&&this.emit("go",this.pageData.currentPage-1,e)}async next(e){this.pageData.currentPage<this.getTotalPage()&&this.emit("go",this.pageData.currentPage+1,e)}disable(){const e=this.pageData.isAsync?"async":"sync";this.emit("beforeDisable",e),this.disabled=!0,this.emit("afterDisable",e)}enable(){const e=this.pageData.isAsync?"async":"sync";this.emit("beforeEnable",e),this.disabled=!1,this.emit("afterEnable",e)}show(){this.element&&"none"===this.element.style.display&&(this.element.style.display="")}hide(){this.element&&"none"!==this.element.style.display&&(this.element.style.display="none")}replaceVariables(e,t){let n=e;for(const e in t){const s=t[e],i=new RegExp(`<%=\\s*${e}\\s*%>`,"img");n=n.replace(i,s)}return n}get version(){return le.version}}return le}));
