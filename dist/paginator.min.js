!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Paginator=t()}(this,(function(){"use strict";function e(...e){console.error(...e)}function t(e){throw new Error(e)}var n=Object.freeze({__proto__:null,reportError:e,throwError:t});function a(e,t,n){if("string"!=typeof e)return e;let a=document;return null===t&&n?a=n:t&&t instanceof Node&&"querySelector"in t?a=t:n&&n instanceof Node&&"querySelector"in n&&(a=n),"all"===t?a.querySelectorAll(e):a.querySelector(e)}function s(e,t,n=1/0,a=!1){let s=e.parentElement,i=0;for(;s&&i<n;){if(s.matches(t))return!a||s;s=s.parentElement,i++}return!!a&&null}function i(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function r(e){return"function"==typeof e}function o(e){return"string"==typeof e}function l(e){return Array.isArray(e)}function c(e){return"number"!=typeof e&&(!e||"string"==typeof e&&0===e.length)}function u(e,...t){if(!t.length)return e;const n=t.shift();if(n)for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const a=n[t],s=t;i(a)||l(a)?(e[s]&&"object"==typeof e[s]||(e[s]=Array.isArray(a)?[]:{}),u(e[s],a)):e[s]=a}return u(e,...t)}function h(e=8){return Math.random().toString(36).substring(2,2+e)}function _(e,t,n){return new CustomEvent(e,{detail:t,...n})}var p=Object.freeze({__proto__:null,addEventListener:function(e,t,n,a){e.addEventListener(t,n,a)},createEvent:_,dispatchEvent:function(n,a=document,s,i){try{if("string"==typeof n){let e=_(n,s,i);return a.dispatchEvent(e)}if(n instanceof Event)return a.dispatchEvent(n);t("Invalid event type")}catch(t){return e("Dispatch Event Error:",t),!1}},removeEventListener:function(e,t,n,a){e.removeEventListener(t,n,a)}});function d(e,t=new FormData){const{data:n,parentKey:a=""}=e;if(null!==n&&"object"==typeof n)if(n instanceof Blob||n instanceof File){const e=a||"file";t.append(e,n)}else Object.keys(n).forEach((e=>{const s=n[e],i=a?`${a}[${e}]`:e;null!==s&&"object"==typeof s?d({data:s,parentKey:i},t):null!==s&&t.append(i,String(s))}));else null!==n&&t.append(a,n);return t}function f(e,t=""){if(e instanceof FormData)return e;return d({data:e,parentKey:t})}async function g(e){const{url:t,method:n="GET",headers:a={},cache:s="no-cache",mode:i="cors",credentials:r="same-origin",body:o=null,beforeSend:l=null,success:c=null,error:u=null}=e;let h,_=t,p={method:n,mode:i,headers:a instanceof Headers?a:new Headers(a),cache:s,credentials:r};if(null!==o&&"GET"===n.toUpperCase())_=function(e,t,n=!0){const a=new URL(e);for(const[e,s]of Object.entries(t)){const t=null===s?"":String(s);!n&&a.searchParams.has(e)||a.searchParams.set(e,t)}return a.toString()}("string"==typeof t?t:t.toString(),o,!0);else if(null!==o&&["PUT","POST","DELETE"].includes(n.toUpperCase())){let e=o;o instanceof FormData||(e=JSON.stringify(o),p.headers instanceof Headers||(p.headers=new Headers(p.headers)),p.headers.append("Content-Type","application/json")),p.body=e}if("string"==typeof _||_ instanceof URL)h=new Request(_,p);else{if(!(_ instanceof Request))throw new Error("Invalid URL type");h=_}try{const e=await new Promise((e=>{l?.(),e(h)})),t=await fetch(e),n=await t.json();return c?.(n),n}catch(e){throw u?.(e),e}}async function m(e){const{url:t,data:n,method:a="POST",headers:s,cache:i,mode:r,credentials:o,success:l,errorCallback:c,beforeSend:u,encode:h=!0}=e;return g({url:t,method:a,headers:s,cache:i,mode:r,credentials:o,body:h&&"GET"!==a.toUpperCase()?f(n):n,beforeSend:u,success:e=>{l?.(e)},error:e=>{c?.(e)}})}async function v(e){const{url:t,data:n,method:a="POST",headers:s,cache:i,mode:r,credentials:o,success:l,errorCallback:c,beforeSend:u}=e;return g({url:t,method:a,headers:s,cache:i,mode:r,credentials:o,body:f(n),beforeSend:u,success:e=>{l?.(e)},error:e=>{c?.(e)}}).then((()=>!0)).catch((()=>!1))}const y=m,b=v;var P=Object.freeze({__proto__:null,doFetch:g,fetchData:y,sendData:m,sendForm:b,sendFormData:v});class N{static throwError=n.throwError;static getElem=a;static hasParent=s;static deepMerge=u;static generateRandom=h;static isEmpty=c;static isObject=i;static isArray=l;static isString=o;static isFunction=r;static createEvent=p.createEvent;static addEventListener=p.addEventListener;static removeEventListener=p.removeEventListener;static dispatchEvent=p.dispatchEvent;static fetchData=P.fetchData;static isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}static composeClassNames(...e){return(e=e.filter((e=>!!e))).length>0?e.join(" "):""}static isPageItem(e){const t=["J-pagination-page","J-pagination-previous","J-pagination-next"],n=e.classList;for(let e=0;e<t.length;e++)if(n.contains(t[e]))return!0;return!1}}const S={dataSource:[],locator:"data",totalNumber:0,totalNumberLocator:null,pageNumber:1,pageSize:10,pageRange:2,alias:{pageNumber:"pageNumber",pageSize:"pageSize"},showPrevious:!0,showNext:!0,showPageNumbers:!0,showNavigator:!1,hideFirstOnEllipsisShow:!1,hideLastOnEllipsisShow:!1,autoHidePrevious:!1,autoHideNext:!1,classPrefix:"pagination",className:"",activeClassName:"active",disableClassName:"disabled",ulClassName:"",pageClassName:"",prevClassName:"",nextClassName:"",prevText:"&laquo;",nextText:"&raquo;",ellipsisText:"...",goButtonText:"Go",formatNavigator:"{currentPage} of {totalPage}",header:"",footer:"",pageLink:"",position:"bottom",formatResult:e=>e,dataLoader:{method:"GET",data:{},cache:"no-cache",headers:{"Content-Type":"application/json"},mode:"cors",beforeSend:e=>e,credentials:"same-origin",pageNumberStartWithZero:!1},triggerPagingOnInit:!0,resetPageNumberOnInit:!1,hideOnlyOnePage:!1,onError:e=>console.error("Pagination error:",e)};var w,E,L,k,x,T,D,C,H,M,O={},I=[],F=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,A=Array.isArray;function R(e,t){for(var n in t)e[n]=t[n];return e}function $(e){var t=e.parentNode;t&&t.removeChild(e)}function U(e,t,n){var a,s,i,r={};for(i in t)"key"==i?a=t[i]:"ref"==i?s=t[i]:r[i]=t[i];if(arguments.length>2&&(r.children=arguments.length>3?w.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===r[i]&&(r[i]=e.defaultProps[i]);return j(e,r,a,s,null)}function j(e,t,n,a,s){var i={type:e,props:t,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==s?++L:s,__i:-1,__u:0};return null==s&&null!=E.vnode&&E.vnode(i),i}function z(e){return e.children}function J(e,t){this.props=e,this.context=t}function W(e,t){if(null==t)return e.__?W(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?W(e):null}function B(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return B(e)}}function q(e){(!e.__d&&(e.__d=!0)&&k.push(e)&&!G.__r++||x!==E.debounceRendering)&&((x=E.debounceRendering)||T)(G)}function G(){var e,t,n,a,s,i,r,o;for(k.sort(D);e=k.shift();)e.__d&&(t=k.length,a=void 0,i=(s=(n=e).__v).__e,r=[],o=[],n.__P&&((a=R({},s)).__v=s.__v+1,E.vnode&&E.vnode(a),te(n.__P,a,s,n.__n,n.__P.namespaceURI,32&s.__u?[i]:null,r,null==i?W(s):i,!!(32&s.__u),o),a.__v=s.__v,a.__.__k[a.__i]=a,ne(r,a,o),a.__e!=i&&B(a)),k.length>t&&k.sort(D));G.__r=0}function V(e,t,n,a,s,i,r,o,l,c,u){var h,_,p,d,f,g=a&&a.__k||I,m=t.length;for(n.__d=l,K(n,t,g),l=n.__d,h=0;h<m;h++)null!=(p=n.__k[h])&&"boolean"!=typeof p&&"function"!=typeof p&&(_=-1===p.__i?O:g[p.__i]||O,p.__i=h,te(e,p,_,s,i,r,o,l,c,u),d=p.__e,p.ref&&_.ref!=p.ref&&(_.ref&&se(_.ref,null,p),u.push(p.ref,p.__c||d,p)),null==f&&null!=d&&(f=d),65536&p.__u||_.__k===p.__k?(l&&!l.isConnected&&(l=W(_)),l=Z(p,l,e)):"function"==typeof p.type&&void 0!==p.__d?l=p.__d:d&&(l=d.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=l,n.__e=f}function K(e,t,n){var a,s,i,r,o,l=t.length,c=n.length,u=c,h=0;for(e.__k=[],a=0;a<l;a++)r=a+h,null!=(s=e.__k[a]=null==(s=t[a])||"boolean"==typeof s||"function"==typeof s?null:"string"==typeof s||"number"==typeof s||"bigint"==typeof s||s.constructor==String?j(null,s,null,null,null):A(s)?j(z,{children:s},null,null,null):void 0===s.constructor&&s.__b>0?j(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s)?(s.__=e,s.__b=e.__b+1,o=Q(s,n,r,u),s.__i=o,i=null,-1!==o&&(u--,(i=n[o])&&(i.__u|=131072)),null==i||null===i.__v?(-1==o&&h--,"function"!=typeof s.type&&(s.__u|=65536)):o!==r&&(o===r+1?h++:o>r?u>l-r?h+=o-r:h--:o<r?o==r-1&&(h=o-r):h=0,o!==a+h&&(s.__u|=65536))):(i=n[r])&&null==i.key&&i.__e&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=W(i)),ie(i,i,!1),n[r]=null,u--);if(u)for(a=0;a<c;a++)null!=(i=n[a])&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=W(i)),ie(i,i))}function Z(e,t,n){var a,s;if("function"==typeof e.type){for(a=e.__k,s=0;a&&s<a.length;s++)a[s]&&(a[s].__=e,t=Z(a[s],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function Q(e,t,n,a){var s=e.key,i=e.type,r=n-1,o=n+1,l=t[n];if(null===l||l&&s==l.key&&i===l.type&&!(131072&l.__u))return n;if(a>(null==l||131072&l.__u?0:1))for(;r>=0||o<t.length;){if(r>=0){if((l=t[r])&&!(131072&l.__u)&&s==l.key&&i===l.type)return r;r--}if(o<t.length){if((l=t[o])&&!(131072&l.__u)&&s==l.key&&i===l.type)return o;o++}}return-1}function X(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||F.test(t)?n:n+"px"}function Y(e,t,n,a,s){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof a&&(e.style.cssText=a=""),a)for(t in a)n&&t in n||X(e.style,t,"");if(n)for(t in n)a&&n[t]===a[t]||X(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?a?n.u=a.u:(n.u=C,e.addEventListener(t,i?M:H,i)):e.removeEventListener(t,i?M:H,i);else{if("http://www.w3.org/2000/svg"==s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function ee(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=C++;else if(t.t<n.u)return;return n(E.event?E.event(t):t)}}}function te(e,t,n,a,s,i,r,o,l,c){var u,h,_,p,d,f,g,m,v,y,b,P,N,S,w,L=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),i=[o=t.__e=n.__e]),(u=E.__b)&&u(t);e:if("function"==typeof L)try{if(m=t.props,v=(u=L.contextType)&&a[u.__c],y=u?v?v.props.value:u.__:a,n.__c?g=(h=t.__c=n.__c).__=h.__E:("prototype"in L&&L.prototype.render?t.__c=h=new L(m,y):(t.__c=h=new J(m,y),h.constructor=L,h.render=re),v&&v.sub(h),h.props=m,h.state||(h.state={}),h.context=y,h.__n=a,_=h.__d=!0,h.__h=[],h._sb=[]),null==h.__s&&(h.__s=h.state),null!=L.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=R({},h.__s)),R(h.__s,L.getDerivedStateFromProps(m,h.__s))),p=h.props,d=h.state,h.__v=t,_)null==L.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==L.getDerivedStateFromProps&&m!==p&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(m,y),!h.__e&&(null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(m,h.__s,y)||t.__v===n.__v)){for(t.__v!==n.__v&&(h.props=m,h.state=h.__s,h.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),b=0;b<h._sb.length;b++)h.__h.push(h._sb[b]);h._sb=[],h.__h.length&&r.push(h);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(m,h.__s,y),null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(p,d,f)}))}if(h.context=y,h.props=m,h.__P=e,h.__e=!1,P=E.__r,N=0,"prototype"in L&&L.prototype.render){for(h.state=h.__s,h.__d=!1,P&&P(t),u=h.render(h.props,h.state,h.context),S=0;S<h._sb.length;S++)h.__h.push(h._sb[S]);h._sb=[]}else do{h.__d=!1,P&&P(t),u=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++N<25);h.state=h.__s,null!=h.getChildContext&&(a=R(R({},a),h.getChildContext())),_||null==h.getSnapshotBeforeUpdate||(f=h.getSnapshotBeforeUpdate(p,d)),V(e,A(w=null!=u&&u.type===z&&null==u.key?u.props.children:u)?w:[w],t,n,a,s,i,r,o,l,c),h.base=t.__e,t.__u&=-161,h.__h.length&&r.push(h),g&&(h.__E=h.__=null)}catch(e){t.__v=null,l||null!=i?(t.__e=o,t.__u|=l?160:32,i[i.indexOf(o)]=null):(t.__e=n.__e,t.__k=n.__k),E.__e(e,t,n)}else null==i&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=ae(n.__e,t,n,a,s,i,r,l,c);(u=E.diffed)&&u(t)}function ne(e,t,n){t.__d=void 0;for(var a=0;a<n.length;a++)se(n[a],n[++a],n[++a]);E.__c&&E.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){E.__e(e,t.__v)}}))}function ae(e,t,n,a,s,i,r,o,l){var c,u,h,_,p,d,f,g=n.props,m=t.props,v=t.type;if("svg"===v?s="http://www.w3.org/2000/svg":"math"===v?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),null!=i)for(c=0;c<i.length;c++)if((p=i[c])&&"setAttribute"in p==!!v&&(v?p.localName===v:3===p.nodeType)){e=p,i[c]=null;break}if(null==e){if(null===v)return document.createTextNode(m);e=document.createElementNS(s,v,m.is&&m),i=null,o=!1}if(null===v)g===m||o&&e.data===m||(e.data=m);else{if(i=i&&w.call(e.childNodes),g=n.props||O,!o&&null!=i)for(g={},c=0;c<e.attributes.length;c++)g[(p=e.attributes[c]).name]=p.value;for(c in g)if(p=g[c],"children"==c);else if("dangerouslySetInnerHTML"==c)h=p;else if("key"!==c&&!(c in m)){if("value"==c&&"defaultValue"in m||"checked"==c&&"defaultChecked"in m)continue;Y(e,c,null,p,s)}for(c in m)p=m[c],"children"==c?_=p:"dangerouslySetInnerHTML"==c?u=p:"value"==c?d=p:"checked"==c?f=p:"key"===c||o&&"function"!=typeof p||g[c]===p||Y(e,c,p,g[c],s);if(u)o||h&&(u.__html===h.__html||u.__html===e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(h&&(e.innerHTML=""),V(e,A(_)?_:[_],t,n,a,"foreignObject"===v?"http://www.w3.org/1999/xhtml":s,i,r,i?i[0]:n.__k&&W(n,0),o,l),null!=i)for(c=i.length;c--;)null!=i[c]&&$(i[c]);o||(c="value",void 0!==d&&(d!==e[c]||"progress"===v&&!d||"option"===v&&d!==g[c])&&Y(e,c,d,g[c],s),c="checked",void 0!==f&&f!==e[c]&&Y(e,c,f,g[c],s))}return e}function se(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){E.__e(e,n)}}function ie(e,t,n){var a,s;if(E.unmount&&E.unmount(e),(a=e.ref)&&(a.current&&a.current!==e.__e||se(a,null,t)),null!=(a=e.__c)){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(e){E.__e(e,t)}a.base=a.__P=null}if(a=e.__k)for(s=0;s<a.length;s++)a[s]&&ie(a[s],t,n||"function"!=typeof e.type);n||null==e.__e||$(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function re(e,t,n){return this.constructor(e,n)}w=I.slice,E={__e:function(e,t,n,a){for(var s,i,r;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&null!=i.getDerivedStateFromError&&(s.setState(i.getDerivedStateFromError(e)),r=s.__d),null!=s.componentDidCatch&&(s.componentDidCatch(e,a||{}),r=s.__d),r)return s.__E=s}catch(t){e=t}throw e}},L=0,J.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=R({},this.state),"function"==typeof e&&(e=e(R({},n),this.props)),e&&R(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),q(this))},J.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),q(this))},J.prototype.render=z,k=[],T="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,D=function(e,t){return e.__v.__b-t.__v.__b},G.__r=0,C=0,H=ee(!1),M=ee(!0);class oe{static version="1.0.0";static instances=[];static firstLoad=!0;instanceID;options=S;pageData={isAsync:!1,direction:0,currentPage:0,totalNumber:0,totalPage:0};container=null;element=null;disabled=!1;isDynamicTotalNumber=!1;eventPrefix="paginator:";constructor(e,t){return this.instanceID=N.generateRandom(6),this.container=N.isString(e)?N.getElem(e):e,this.initialize(t).then((e=>{this.bindEvents(),this.observer(),this.callHook("afterInit",e),this.initPageTrigger()})),oe.instances.push(this),1===oe.instances.length&&!0===oe.firstLoad&&console.log(`Paginator is loaded, version: ${oe.version}`),oe.firstLoad=!1,this}async initialize(e){this.options=N.deepMerge({},S,e);const t=await this.parseDataSource(this.options.dataSource);this.pageData.isAsync=N.isString(t),this.pageData.totalNumber=N.isArray(t)?t.length:0,this.isDynamicTotalNumber=N.isFunction(this.options.totalNumberLocator)&&this.pageData.isAsync;const n=this.renderHTML(!0);return this.options.className&&n.classList.add(this.options.className),n}async parseDataSource(e){return new Promise(((t,n)=>{if(N.isObject(e))t(this.options.dataSource=this.filterDataWithLocator(e));else if(N.isArray(e))t(this.options.dataSource=e);else if(N.isFunction(e)){if(!N.isFunction(this.options.dataSource))return void n('The type of "dataSource" is a Function, but "options.dataSource" is not a Function.');this.options.dataSource((e=>{N.isArray(e)||n('The parameter of "done" Function should be an Array.'),this.parseDataSource(e).then(t).catch(n)}))}else N.isString(e)?(/^https?|file:/.test(e)||(e=(e=new URL(e,window.location.href)).toString()),t(e)):n("Unexpected dataSource type")}))}async initPageTrigger(){let e=this.pageData.currentPage||this.options.pageNumber;const t=this.element;t&&(this.isDynamicTotalNumber&&this.options.resetPageNumberOnInit&&(e=1),this.options.triggerPagingOnInit&&N.dispatchEvent(this.eventPrefix+"go",t,{pageNumber:Math.min(e,Math.max(this.getTotalPage(),1))}))}renderHTML(e=!1){const t=this.options,n=this.getTotalPage();if(e){const e=document.createElement("div");e.className="paginator",e.dataset.instanceId=this.instanceID,t.className&&e.classList.add(t.className),this.container&&("bottom"===t.position?this.container.appendChild(e):this.container.insertBefore(e,this.container.firstChild)),this.element=e}const a=this.element;this.callHook("beforeRender",!0!==e);const s=this.pageData.currentPage||t.pageNumber,i=t.pageRange||0;let r=s-i,o=s+i;o>n&&(o=n,r=n-2*i,r=r<1?1:r),r<=1&&(r=1,o=Math.min(2*i+1,n));return function(e,t,n){var a,s,i,r;E.__&&E.__(e,t),s=(a="function"==typeof n)?null:t.__k,i=[],r=[],te(t,e=(!a&&n||t).__k=U(z,null,[e]),s||O,O,t.namespaceURI,!a&&n?[n]:s?null:t.firstChild?w.call(t.childNodes):null,i,!a&&n?n:s?s.__e:t.firstChild,a,r),ne(i,e,r)}(this.generateHTML(s,r,o),a),t.hideOnlyOnePage&&n<=1?this.element.style.display="none":this.element.style.display="",this.callHook("afterRender",!0!==e),a}renderData(e,t,n){if(!1===this.callHook("beforePaging",t))return!1;if(this.pageData.direction=t>this.pageData.currentPage?1:-1,this.pageData.currentPage=t,this.renderHTML(),this.disabled&&this.pageData.isAsync&&this.enable(),"function"==typeof this.options.formatResult){let t=N.deepMerge([],e);N.isArray(e=this.options.formatResult(t))||(e=t)}this.doCallback(e,n),this.callHook("afterPaging",t),1===t?this.callHook("afterIsFirstPage"):t===this.getTotalPage()&&this.callHook("afterIsLastPage")}callHook(e,...t){let n=!0;const a=this.options[e];return a&&"function"==typeof a&&!1===a.apply(this,t)&&(n=!1),n}observer(){this.element.addEventListener("click",(async e=>{let t=e.target;if(!N.isPageItem(t)){const e=N.hasParent(t,"li",5,!0);if(!e)return;t=e}const n=t.getAttribute("data-num");if(t.classList.contains("J-paginator-page")&&n&&!1!==this.callHook("beforePageOnClick",e,n)&&(await this.go(parseInt(n,10)),this.callHook("afterPageOnClick",e,n)),t.classList.contains("J-paginator-previous")&&n&&!1!==this.callHook("beforePreviousOnClick",e,n)&&(await this.go(parseInt(n,10)),this.callHook("afterPreviousOnClick",e,n)),t.classList.contains("J-paginator-next")&&n&&!1!==this.callHook("beforeNextOnClick",e,n)&&(await this.go(parseInt(n,10)),this.callHook("afterNextOnClick",e,n)),t.classList.contains("J-paginator-go-button")){const t=N.getElem(".J-paginator-go-pagenumber");if(!t)return;const n=t.value;!1!==this.callHook("beforeGoButtonOnClick",e,n)&&(await this.go(parseInt(n,10)),this.callHook("afterGoButtonOnClick",e,n))}if(t.classList.contains("J-paginator-size-select")){const n=parseInt(t.value,10),a=this.pageData.currentPage||this.options.pageNumber;!1!==this.callHook("beforeSizeSelectorChange",e,n)&&(this.options.pageSize=n,this.pageData.currentPage=n,this.pageData.totalPage=this.getTotalPage(),a>this.pageData.totalPage&&(this.pageData.currentPage=this.pageData.totalPage),await this.go(this.pageData.currentPage),this.callHook("afterSizeSelectorChange",e,n))}}))}getPagingData(e){const t=this.options.dataSource,n=this.options.pageSize||0,a=this.getTotalNumber(),s=n*(e-1)+1,i=Math.min(e*n,a);return N.isArray(t)?t.slice(s-1,i):[]}getTotalNumber(){return this.pageData.totalNumber||this.options.totalNumber||0}getTotalPage(){const e=this.options.pageSize||0;return Math.ceil(this.getTotalNumber()/e)}getLocator(e){let t;return"string"==typeof e?t=e:"function"==typeof e?t=e():N.throwError('"locator" is incorrect. Expect string or function type.'),t}filterDataWithLocator(e){const t=this.getLocator(this.options.locator);let n=e;if(N.isString(t)||N.throwError("locator is incorrect. Expect string type."),N.isObject(e))try{t.split(".").forEach((e=>{n=n[e]})),N.isArray(n)||N.throwError("dataSource."+t+" should be an Array.")}catch(e){N.throwError(`Error accessing dataSource.${t}: ${e}`)}return n}bindEvents(){const e=this.element;e&&(N.addEventListener(e,this.eventPrefix+"go",(async e=>{await this.go(e.detail.pageNumber,e.detail.done)})),N.addEventListener(e,this.eventPrefix+"previous",(e=>{this.previous(e.detail.done)})),N.addEventListener(e,this.eventPrefix+"next",(e=>{this.next(e.detail.done)})),N.addEventListener(e,this.eventPrefix+"refresh",(e=>{this.refresh(e.detail.done)})),e.addEventListener(this.eventPrefix+"disable",(()=>{this.disable()})),e.addEventListener(this.eventPrefix+"enable",(()=>{this.enable()})),e.addEventListener(this.eventPrefix+"show",(()=>{this.show()})),e.addEventListener(this.eventPrefix+"hide",(()=>{this.hide()})),e.addEventListener(this.eventPrefix+"destroy",(()=>{this.destroy()})))}getPageLinkTag(e){const t=this.options.pageLink;return U("a",t?{href:t}:null,e)}generatePageNumbersHTML(e){const t=this.options,n=e.currentPage,a=this.getTotalPage(),s=e.rangeStart,i=e.rangeEnd,r=this.getPageLinkTag.bind(this),o=t.ellipsisText,l=t.classPrefix,c=t.pageClassName||"",u=t.activeClassName||"",h=t.disableClassName||"",_=[];if(null===t.pageRange){for(let e=1;e<=a;e++)_.push(U("li",{class:N.composeClassNames(`${l}-page`,"J-paginator-page",c,e===n?u:""),"data-num":e.toString()},r(e)));return _}if(s<=3)for(let e=1;e<s;e++)_.push(U("li",{class:N.composeClassNames(`${l}-page`,"J-paginator-page",c,e===n?u:""),"data-num":e.toString()},r(e)));else t.hideFirstOnEllipsisShow||_.push(U("li",{class:N.composeClassNames(`${l}-page`,`${l}-first`,"J-paginator-page",c),"data-num":"1"},r(1))),_.push(U("li",{class:N.composeClassNames(`${l}-ellipsis`,h)},U("a",{dangerouslySetInnerHTML:{__html:o}})));for(let e=s;e<=i;e++)_.push(U("li",{class:N.composeClassNames(`${l}-page`,"J-paginator-page",c,e===n?u:""),"data-num":e.toString()},r(e)));if(i>=a-2)for(let e=i+1;e<=a;e++)_.push(U("li",{class:N.composeClassNames(`${l}-page`,"J-paginator-page",c),"data-num":e.toString()},r(e)));else _.push(U("li",{class:N.composeClassNames(`${l}-ellipsis`,h)},U("a",{dangerouslySetInnerHTML:{__html:o}}))),t.hideLastOnEllipsisShow||_.push(U("li",{class:N.composeClassNames(`${l}-page`,`${l}-last`,"J-paginator-page",c),"data-num":a.toString()},r(a)));return _}generateHTML(e,t,n){const a=this.options,s=this.getTotalPage(),i=this.getTotalNumber(),r=a.pageSize||0,o=a.prevText,l=a.nextText,c=a.classPrefix||"",u=a.disableClassName||"",h=a.ulClassName||"",_=a.prevClassName||"",p=a.nextClassName||"",d="function"==typeof a.formatNavigator?a.formatNavigator(e,s,i):a.formatNavigator,f=a.autoHidePrevious??!1,g=a.autoHideNext??!1,m="function"==typeof a.header?a.header(e,s,i):a.header,v="function"==typeof a.footer?a.footer(e,s,i):a.footer,y=[];a.showPrevious&&(e<=1?f||y.push(U("li",{class:N.composeClassNames(`${c}-prev`,u,_)},U("a",{dangerouslySetInnerHTML:{__html:o}}))):y.push(U("li",{class:N.composeClassNames(`${c}-prev`,"J-paginator-previous",_),"data-num":e-1,title:"Previous page"},U("a",{dangerouslySetInnerHTML:{__html:o}})))),a.showPageNumbers&&y.push(...this.generatePageNumbersHTML({currentPage:e,rangeStart:t,rangeEnd:n})),a.showNext&&(e>=s?g||y.push(U("li",{class:N.composeClassNames(`${c}-next`,u,p)},U("a",{dangerouslySetInnerHTML:{__html:l}}))):y.push(U("li",{class:N.composeClassNames(`${c}-next`,"J-paginator-next",p),"data-num":e+1,title:"Next page"},U("a",{dangerouslySetInnerHTML:{__html:l}}))));const b=[m&&U("div",{class:"paginator-header",dangerouslySetInnerHTML:{__html:this.replaceVariables(m,{currentPage:e,totalPage:s,totalNumber:i})}}),a.showNavigator&&d&&U("div",{class:N.composeClassNames(`${c}-nav J-paginator-nav`),dangerouslySetInnerHTML:{__html:this.replaceVariables(d,{currentPage:e,totalPage:s,totalNumber:i,rangeStart:(e-1)*r+1,rangeEnd:Math.min(e*r,i)})}}),U("div",{class:"paginator-pages"},U("ul",{class:h},...y)),v&&U("div",{class:"paginator-footer",dangerouslySetInnerHTML:{__html:this.replaceVariables(v,{currentPage:e,totalPage:s,totalNumber:i})}})].filter(Boolean);return U("div",{class:"paginator-container"},...b)}findTotalNumberFromRemoteResponse(e){let t=0;N.isFunction(this.options.totalNumberLocator)&&(t=this.options.totalNumberLocator(e),N.isNumeric(t)||N.throwError("totalNumberLocator should return a number."),this.pageData.totalNumber=t)}async go(e,t){if(this.disabled||!this.element)return;if(!(e=parseInt(e,10))||e<1)return;const n=this.options.pageSize,a=this.getTotalNumber(),s=this.getTotalPage();if(a>0&&e>s)return;if(!this.pageData.isAsync)return void this.renderData(this.getPagingData(e),e,t);const i={},r=this.options.alias||{},o=r.pageSize||"pageSize",l=r.pageNumber||"pageNumber";i[o]=n,i[l]=e;const c=N.isFunction(this.options.dataLoader)?this.options.dataLoader():this.options.dataLoader;c&&c.pageNumberStartWithZero&&(i[l]=e-1);const u={url:this.options.dataSource,method:c?.method,data:c?.data?"function"==typeof c.data?await c.data(c):N.deepMerge({},c?.data,i):i,headers:c?.headers,mode:c?.mode,cache:c?.cache,credentials:c?.credentials||"same-origin",beforeSend:()=>{this.disable(),c?.beforeSend&&c.beforeSend(c)},success:n=>{this.isDynamicTotalNumber?this.findTotalNumberFromRemoteResponse(n):this.pageData.totalNumber=this.options.totalNumber;const a=this.filterDataWithLocator(n);this.renderData(a,e,t),this.enable()},errorCallback:e=>{if("function"!=typeof this.options.onError)throw e;this.options.onError(e),this.enable()}};N.isFunction(this.options.dataLoaderFunction)?this.options.dataLoaderFunction(this):await N.fetchData(u)}doCallback(e,t){"function"==typeof t?t(e,this.pageData):"function"==typeof this.options.callback&&this.options.callback(e,this)}destroy(){!1!==this.callHook("beforeDestroy")&&(this.element&&(this.element.remove(),this.element=null),this.container&&(this.container.innerHTML=""),this.unbindEvents(),oe.instances=oe.instances.filter((e=>e!==this)),this.callHook("afterDestroy"))}async previous(e){this.pageData.currentPage>1&&await this.go(this.pageData.currentPage-1,e)}async next(e){this.pageData.currentPage<this.getTotalPage()&&await this.go(this.pageData.currentPage+1,e)}disable(){const e=this.pageData.isAsync?"async":"sync";!1!==this.callHook("beforeDisable",e)&&(this.disabled=!0,this.callHook("afterDisable",e))}enable(){const e=this.pageData.isAsync?"async":"sync";!1!==this.callHook("beforeEnable",e)&&(this.disabled=!1,this.callHook("afterEnable",e))}async refresh(e){await this.go(this.pageData.currentPage,e)}show(){this.element&&"none"===this.element.style.display&&(this.element.style.display="")}hide(){this.element&&"none"!==this.element.style.display&&(this.element.style.display="none")}replaceVariables(e,t){let n=e;for(const e in t){const a=t[e],s=new RegExp(`<%=\\s*${e}\\s*%>`,"img");n=n.replace(s,a)}return n}unbindEvents(){const e=this.element;e&&(N.removeEventListener(e,this.eventPrefix+"go",this.eventHandlers.go),N.removeEventListener(e,this.eventPrefix+"previous",this.eventHandlers.previous),N.removeEventListener(e,this.eventPrefix+"next",this.eventHandlers.next),N.removeEventListener(e,this.eventPrefix+"refresh",this.eventHandlers.refresh),e.removeEventListener(this.eventPrefix+"disable",this.eventHandlers.disable),e.removeEventListener(this.eventPrefix+"enable",this.eventHandlers.enable),e.removeEventListener(this.eventPrefix+"show",this.eventHandlers.show),e.removeEventListener(this.eventPrefix+"hide",this.eventHandlers.hide),e.removeEventListener(this.eventPrefix+"destroy",this.eventHandlers.destroy))}eventHandlers={go:async e=>await this.go(e.detail.pageNumber,e.detail.done),previous:async e=>await this.previous(e.detail.done),next:async e=>await this.next(e.detail.done),disable:()=>this.disable(),enable:()=>this.enable(),refresh:async e=>await this.refresh(e.detail.done),show:()=>this.show(),hide:()=>this.hide(),destroy:()=>this.destroy()};get version(){return oe.version}}return oe}));
